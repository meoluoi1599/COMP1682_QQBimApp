{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"D:\\\\QQBimApp\\\\QQBimApp\\\\src\\\\users\\\\ScreemFolder\\\\StoryScreen\\\\ReadingScreen.js\";\nimport React from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport Share from \"react-native-web/dist/exports/Share\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport { SplashScreen } from \"../../ScreemFolder/OtherScreen\";\nimport { MaterialCommunityIcons, Ionicons, AntDesign } from '@expo/vector-icons';\nimport { ReadingHeader } from \"../../Components/HeaderComponent\";\nimport AsyncStorage from \"react-native-web/dist/exports/AsyncStorage\";\n\nfunction ReadingScreen(props) {\n  var _React$useState = React.useState([]),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      dataSource = _React$useState2[0],\n      setDataSource = _React$useState2[1];\n\n  var _React$useState3 = React.useState(true),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      isLoading = _React$useState4[0],\n      setLoading = _React$useState4[1];\n\n  var _React$useState5 = React.useState(props.route.params.item.vote),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      vote = _React$useState6[0],\n      setVote = _React$useState6[1];\n\n  var _React$useState7 = React.useState(false),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      voting = _React$useState8[0],\n      setVoting = _React$useState8[1];\n\n  var _React$useState9 = React.useState(0),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      chapterId = _React$useState10[0],\n      setChapterId = _React$useState10[1];\n\n  var _React$useState11 = React.useState(false),\n      _React$useState12 = _slicedToArray(_React$useState11, 2),\n      modalVisible = _React$useState12[0],\n      setModalVisible = _React$useState12[1];\n\n  var _React$useState13 = React.useState([]),\n      _React$useState14 = _slicedToArray(_React$useState13, 2),\n      comment = _React$useState14[0],\n      setComment = _React$useState14[1];\n\n  var _React$useState15 = React.useState(''),\n      _React$useState16 = _slicedToArray(_React$useState15, 2),\n      contentComent = _React$useState16[0],\n      setContentComent = _React$useState16[1];\n\n  var _React$useState17 = React.useState([]),\n      _React$useState18 = _slicedToArray(_React$useState17, 2),\n      userData = _React$useState18[0],\n      setUserData = _React$useState18[1];\n\n  var getData = function getData() {\n    return _regeneratorRuntime.async(function getData$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            try {\n              AsyncStorage.getItem('user').then(function (value) {\n                var jsonValue = JSON.parse(value);\n                setUserData(jsonValue);\n              });\n            } catch (e) {\n              console.log(e);\n            }\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  React.useEffect(function () {\n    setVote(voting ? vote + 1 : vote - 1);\n  }, [voting]);\n  React.useEffect(function () {\n    sendVote();\n  }, [vote]);\n  useFocusEffect(React.useCallback(function () {\n    props.navigation.dangerouslyGetParent().setOptions({\n      tabBarVisible: false\n    });\n    getData();\n    fetch('http://192.168.0.101:19000/default_chapter/' + props.route.params.item.story_id).then(function (response) {\n      return response.json();\n    }).then(function (res) {\n      setDataSource(res);\n      setChapterId(res[0].chapter_id);\n    }).catch(function (error) {\n      console.log(error);\n    }).finally(function () {\n      setLoading(false);\n    });\n    return function () {\n      console.log('un');\n    };\n  }, []));\n\n  var getPrevChapter = function getPrevChapter() {\n    fetch('http://192.168.0.101:19000/prev_chapter/' + props.route.params.item.story_id + '/' + chapterId).then(function (response) {\n      return response.json();\n    }).then(function (res) {\n      setDataSource(res);\n      setChapterId(res[0].chapter_id);\n    }).catch(function (error) {\n      console.log(error);\n    }).finally(function () {\n      setLoading(false);\n    });\n  };\n\n  var getNextChapter = function getNextChapter() {\n    fetch('http://192.168.0.101:19000/next_chapter/' + props.route.params.item.story_id + '/' + chapterId).then(function (response) {\n      return response.json();\n    }).then(function (res) {\n      setDataSource(res);\n      setChapterId(res[0].chapter_id);\n    }).catch(function (error) {\n      console.log(error);\n    }).finally(function () {\n      setLoading(false);\n    });\n  };\n\n  function sendVote() {\n    fetch('http://192.168.0.101:19000/vote/' + props.route.params.item.story_id + '/' + vote).then(function (response) {\n      return response.json();\n    }).then(function (res) {\n      console.log('voting:' + res);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  var onShare = function onShare() {\n    var result;\n    return _regeneratorRuntime.async(function onShare$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return _regeneratorRuntime.awrap(Share.share({\n              message: 'This story is very good'\n            }));\n\n          case 3:\n            result = _context2.sent;\n\n            if (result.action === Share.sharedAction) {\n              if (result.activityType) {} else {}\n            } else if (result.action === Share.dismissedAction) {}\n\n            _context2.next = 10;\n            break;\n\n          case 7:\n            _context2.prev = 7;\n            _context2.t0 = _context2[\"catch\"](0);\n            alert(_context2.t0.message);\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  };\n\n  var getComment = function getComment() {\n    fetch('http://192.168.0.101:19000/get_comment/' + props.route.params.item.story_id).then(function (response) {\n      return response.json();\n    }).then(function (res) {\n      setComment(res);\n    }).catch(function (error) {\n      console.log(error);\n    }).finally(function () {\n      setLoading(false);\n    });\n  };\n\n  var submitComment = function submitComment() {\n    fetch('http://192.168.0.101:19000/add_comment', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        'user_id': userData.user_id,\n        'comment_content': contentComent,\n        'story_id': props.route.params.item.story_id\n      })\n    }).then(function (response) {\n      return response.json();\n    }).then(function (res) {\n      setContentComent('');\n      setModalVisible(false);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  function ListEmpty() {\n    return React.createElement(View, {\n      style: styles.MainContainer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 7\n      }\n    }, React.createElement(Text, {\n      style: {\n        textAlign: 'center',\n        justifyContent: 'center'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 9\n      }\n    }, \"There are no content\"));\n  }\n\n  ;\n  return React.createElement(View, {\n    style: styles.container,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 5\n    }\n  }, React.createElement(ReadingHeader, _extends({}, props, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }\n  })), React.createElement(View, {\n    style: {\n      flex: 1\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }\n  }, isLoading ? React.createElement(SplashScreen, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 21\n    }\n  }) : React.createElement(FlatList, {\n    data: dataSource,\n    keyExtractor: function keyExtractor(item) {\n      return item.chapter_id.toString();\n    },\n    renderItem: function renderItem(_ref) {\n      var item = _ref.item;\n      return React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 15\n        }\n      }, React.createElement(Text, {\n        style: {\n          padding: 20,\n          fontSize: 15,\n          textAlign: 'justify'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 19\n        }\n      }, item.chapter_content));\n    },\n    showsHorizontalScrollIndicator: false,\n    ListEmptyComponent: ListEmpty,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 11\n    }\n  })), React.createElement(View, {\n    style: styles.tabView,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: styles.tabContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 9\n    }\n  }, React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return getPrevChapter();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 11\n    }\n  }, React.createElement(AntDesign, {\n    name: \"arrowleft\",\n    size: 24,\n    color: '#aa4fff',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 13\n    }\n  })), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      setVoting(!voting);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 11\n    }\n  }, React.createElement(Ionicons, {\n    name: voting ? 'md-star' : 'md-star-outline',\n    size: 24,\n    color: '#aa4fff',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 15\n    }\n  })), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      setModalVisible(true);\n      getComment();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 11\n    }\n  }, React.createElement(MaterialCommunityIcons, {\n    name: \"comment-outline\",\n    size: 24,\n    color: '#aa4fff',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 15\n    }\n  })), React.createElement(TouchableOpacity, {\n    onPress: onShare,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 11\n    }\n  }, React.createElement(MaterialCommunityIcons, {\n    name: \"share-variant\",\n    size: 24,\n    color: '#aa4fff',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 15\n    }\n  })), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return getNextChapter();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 11\n    }\n  }, React.createElement(AntDesign, {\n    name: \"arrowright\",\n    size: 24,\n    color: '#aa4fff',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 13\n    }\n  })))), React.createElement(Modal, {\n    animationType: \"slide\",\n    transparent: true,\n    visible: modalVisible,\n    onRequestClose: function onRequestClose() {\n      setModalVisible(!modalVisible);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 7\n    }\n  }, React.createElement(View, {\n    style: styles.modalView,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 11\n    }\n  }, React.createElement(View, {\n    style: styles.HeaderModal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: styles.HeaderText,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 15\n    }\n  }, \"Comment\"), React.createElement(TouchableOpacity, {\n    style: styles.close,\n    onPress: function onPress() {\n      setModalVisible(!modalVisible);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 15\n    }\n  }, React.createElement(AntDesign, {\n    name: \"close\",\n    size: 24,\n    color: \"black\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 19\n    }\n  }))), React.createElement(View, {\n    style: styles.comment,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 13\n    }\n  }, React.createElement(FlatList, {\n    data: comment,\n    keyExtractor: function keyExtractor(item) {\n      return item.comment_id.toString();\n    },\n    showsHorizontalScrollIndicator: false,\n    renderItem: function renderItem(_ref2) {\n      var item = _ref2.item;\n      return React.createElement(View, {\n        style: styles.commentContent,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 21\n        }\n      }, React.createElement(Image, {\n        style: styles.commentImg,\n        source: {\n          uri: item.user_avatar\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 25\n        }\n      }), React.createElement(View, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 25\n        }\n      }, React.createElement(Text, {\n        style: {\n          fontWeight: 'bold'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 27\n        }\n      }, item.fullname), React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 27\n        }\n      }, item.comment_content)));\n    },\n    ListEmptyComponent: ListEmpty,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 15\n    }\n  })), React.createElement(View, {\n    style: {\n      justifyContent: 'flex-end',\n      backgroundColor: '#aa4fff',\n      width: '100%',\n      height: 50,\n      flexDirection: 'row',\n      paddingRight: 5,\n      marginBottom: 30\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 264,\n      columnNumber: 13\n    }\n  }, React.createElement(TextInput, {\n    style: {\n      height: 40,\n      margin: 5,\n      backgroundColor: 'white',\n      width: '80%'\n    },\n    autoCorrect: false,\n    value: contentComent,\n    onSubmitEditing: function onSubmitEditing() {\n      return submitComment();\n    },\n    onChangeText: function onChangeText(text) {\n      return setContentComent(text);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 15\n    }\n  }), React.createElement(TouchableOpacity, {\n    onPress: function onPress() {\n      return submitComment();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 15\n    }\n  }, React.createElement(Ionicons, {\n    name: \"md-send\",\n    size: 45,\n    color: \"white\",\n    style: {\n      marginLeft: 10,\n      marginRight: 10\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 273,\n      columnNumber: 17\n    }\n  }))))));\n}\n\nexport { ReadingScreen };\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    justifyContent: 'flex-start',\n    flexDirection: 'column',\n    alignItems: 'center',\n    borderColor: '#8a2be2'\n  },\n  tabView: {\n    justifyContent: 'flex-end',\n    backgroundColor: '#aa4fff',\n    width: '100%',\n    height: 40,\n    paddingRight: 5\n  },\n  tabContainer: {\n    flex: 1,\n    height: 40,\n    width: Dimensions.get('window').width,\n    backgroundColor: 'white',\n    alignItems: 'center',\n    justifyContent: 'space-around',\n    flexDirection: 'row'\n  },\n  modalView: {\n    backgroundColor: \"white\",\n    shadowColor: \"#000\",\n    width: Dimensions.get('window').width,\n    height: Dimensions.get('window').height\n  },\n  HeaderModal: {\n    justifyContent: 'flex-start',\n    alignItems: 'center',\n    flexDirection: 'row',\n    backgroundColor: '#EEEEEE',\n    height: 40,\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n    elevation: 5\n  },\n  HeaderText: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    marginLeft: 10,\n    flex: 1\n  },\n  close: {\n    flex: -1,\n    marginRight: 10\n  },\n  comment: {\n    padding: 5,\n    flex: 3\n  },\n  commentImg: {\n    width: 60,\n    height: 60,\n    borderRadius: 50,\n    marginLeft: 10,\n    marginRight: 10\n  },\n  commentContent: {\n    flexDirection: 'row',\n    margin: 5\n  }\n});","map":{"version":3,"sources":["D:/QQBimApp/QQBimApp/src/users/ScreemFolder/StoryScreen/ReadingScreen.js"],"names":["React","SplashScreen","MaterialCommunityIcons","Ionicons","AntDesign","ReadingHeader","ReadingScreen","props","useState","dataSource","setDataSource","isLoading","setLoading","route","params","item","vote","setVote","voting","setVoting","chapterId","setChapterId","modalVisible","setModalVisible","comment","setComment","contentComent","setContentComent","userData","setUserData","getData","AsyncStorage","getItem","then","value","jsonValue","JSON","parse","e","console","log","useEffect","sendVote","useFocusEffect","useCallback","navigation","dangerouslyGetParent","setOptions","tabBarVisible","fetch","story_id","response","json","res","chapter_id","catch","error","finally","getPrevChapter","getNextChapter","onShare","Share","share","message","result","action","sharedAction","activityType","dismissedAction","alert","getComment","submitComment","method","headers","Accept","body","stringify","user_id","ListEmpty","styles","MainContainer","textAlign","justifyContent","container","flex","toString","padding","fontSize","chapter_content","tabView","tabContainer","modalView","HeaderModal","HeaderText","close","comment_id","commentContent","commentImg","uri","user_avatar","fontWeight","fullname","comment_content","backgroundColor","width","height","flexDirection","paddingRight","marginBottom","margin","text","marginLeft","marginRight","StyleSheet","create","alignItems","borderColor","Dimensions","get","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","borderRadius"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { StyleSheet, Dimensions, View, TouchableOpacity, Text, FlatList,Share,Modal, Image, TextInput } from 'react-native';\nimport {SplashScreen} from '../../ScreemFolder/OtherScreen';\nimport { MaterialCommunityIcons,Ionicons, AntDesign} from '@expo/vector-icons';\nimport {ReadingHeader} from  '../../Components/HeaderComponent';\nimport { AsyncStorage } from 'react-native';\n\nfunction ReadingScreen(props) {\n  const [dataSource, setDataSource ]= React.useState([]);\n  const [isLoading, setLoading] = React.useState(true);\n  const [vote, setVote] = React.useState(props.route.params.item.vote);\n  const [voting, setVoting] = React.useState(false);\n  const [chapterId, setChapterId] =  React.useState(0);\n  const [modalVisible, setModalVisible] = React.useState(false);\n  const [comment, setComment ]= React.useState([]);\n  const [contentComent, setContentComent] = React.useState('');\n  const [userData, setUserData] = React.useState([]);\n\n  const getData = async () => {\n    try {\n      AsyncStorage.getItem('user').then((value) => {\n        const jsonValue = JSON.parse(value);\n        setUserData(jsonValue);\n      })\n    } catch(e) {\n      console.log(e)\n    }\n  }\n\n  React.useEffect(()=>{\n    setVote(voting?vote+1:vote-1);\n  },[voting]);\n  \n  React.useEffect(()=>{\n      sendVote();\n  },[vote]);\n\n  // const getMyData=async ()=>{\n  //   const req=await fetch(\"\");\n  //   const data=await req.json();\n  //   console.log(data);\n  // }\n  useFocusEffect(\n    React.useCallback(() => {\n      props.navigation.dangerouslyGetParent().setOptions({\n        tabBarVisible: false\n      });\n      getData();\n      fetch('http://192.168.0.101:19000/default_chapter/' + props.route.params.item.story_id)\n      .then ((response) => response.json())\n      .then ( (res) => { \n        setDataSource(res);\n        setChapterId(res[0].chapter_id);\n      })\n      .catch ((error) => {\n        console.log(error);\n      })\n      .finally(() => {\n        setLoading(false); \n      });\n      // Do something when the screen is focused\n      return () => {\n        console.log('un')\n      };\n    }, [])\n  );\n\n  const getPrevChapter = () => {\n    fetch('http://192.168.0.101:19000/prev_chapter/' + props.route.params.item.story_id + '/' + chapterId)\n    .then ((response) => response.json())\n    .then ( (res) => { \n      setDataSource(res);\n      setChapterId(res[0].chapter_id);\n    })\n    .catch ((error) => {\n      console.log(error);\n    })\n    .finally(() => {\n      setLoading(false); \n    });\n  }\n\n  const getNextChapter = () => {\n    fetch('http://192.168.0.101:19000/next_chapter/' + props.route.params.item.story_id + '/' + chapterId)\n    .then ((response) => response.json())\n    .then ( (res) => { \n      setDataSource(res);\n      setChapterId(res[0].chapter_id);\n    })\n    .catch ((error) => {\n      console.log(error);\n    })\n    .finally(() => {\n      setLoading(false); \n    });\n  }\n\n  function sendVote() {\n    fetch('http://192.168.0.101:19000/vote/' + props.route.params.item.story_id + '/' + vote)\n    .then ((response) => response.json())\n    .then ( (res) => { \n        console.log('voting:' + res);\n    })\n    .catch ((error) => {\n        console.log(error);\n    })\n  }\n\n  const onShare = async () => {\n    try {\n      const result = await Share.share({\n        message:\n          'This story is very good',\n      });\n      if (result.action === Share.sharedAction) {\n        if (result.activityType) {\n          // shared with activity type of result.activityType\n        } else {\n          // shared\n        }\n      } else if (result.action === Share.dismissedAction) {\n        // dismissed\n      }\n    } catch (error) {\n      alert(error.message);\n    }\n  };\n\n  const getComment = () => {\n    fetch('http://192.168.0.101:19000/get_comment/' + props.route.params.item.story_id)\n    .then ((response) => response.json())\n    .then ( (res) => { \n      setComment(res);\n    })\n    .catch ((error) => {\n      console.log(error);\n    })\n    .finally(() => {\n      setLoading(false) \n    });\n  }\n\n  const submitComment=()=> {\n    fetch('http://192.168.0.101:19000/add_comment' , {\n          method: 'POST',\n          headers: {\n              Accept: 'application/json',\n              'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            'user_id': userData.user_id,\n            'comment_content': contentComent,\n            'story_id': props.route.params.item.story_id\n          })\n      })\n      .then ((response) => response.json())\n      .then ( (res) => { \n        setContentComent('');\n        setModalVisible(false);\n      })\n      .catch ((error) => {\n        console.log(error);\n      })\n  } \n\n  function ListEmpty() {\n    return (\n      //View to show when list is empty\n      <View style={styles.MainContainer}>\n        <Text style={{ textAlign: 'center', justifyContent: 'center' }}>There are no content</Text>\n      </View>\n    );\n  };\n  \n  return (\n    <View style={styles.container}>\n      <ReadingHeader {...props}/>\n      <View style={{flex: 1}}>\n        {isLoading? <SplashScreen/>:(\n          <FlatList\n            data={dataSource}\n            keyExtractor= {item => item.chapter_id.toString()}\n            renderItem={({ item }) => (\n              <View>         \n                  <Text style={{ padding: 20, fontSize: 15, textAlign: 'justify'}}>{item.chapter_content}</Text>\n              </View>\n            )}  \n            showsHorizontalScrollIndicator={false}\n            ListEmptyComponent={ListEmpty}\n          /> \n        )}\n      </View>\n      <View style={styles.tabView}>\n        <View style={styles.tabContainer}>\n          <TouchableOpacity onPress={()=> getPrevChapter()}>\n            <AntDesign name=\"arrowleft\" size={24} color={'#aa4fff'} />\n          </TouchableOpacity>\n          <TouchableOpacity onPress={() => {setVoting(!voting);}}>\n              <Ionicons \n                  name= {voting?'md-star':'md-star-outline'}\n                  size={24} \n                  color={'#aa4fff'} \n              />\n          </TouchableOpacity>\n          <TouchableOpacity \n            onPress={() => {\n              setModalVisible(true);\n              getComment();\n            }}>\n              <MaterialCommunityIcons \n                  name=\"comment-outline\" \n                  size={24} \n                  color={'#aa4fff'} \n              />\n          </TouchableOpacity>\n          <TouchableOpacity onPress={onShare}>\n              <MaterialCommunityIcons name=\"share-variant\" size={24} color={'#aa4fff'} />\n          </TouchableOpacity>\n          <TouchableOpacity onPress={()=> getNextChapter()}>\n            <AntDesign name=\"arrowright\" size={24} color={'#aa4fff'} />\n          </TouchableOpacity>\n        </View>\n      </View>\n      <Modal\n        animationType=\"slide\"\n        transparent={true}\n        visible={modalVisible}\n        onRequestClose={() => {\n          setModalVisible(!modalVisible);\n        }}\n      >\n          <View style={styles.modalView}>\n            <View style={styles.HeaderModal}>\n              <Text style={styles.HeaderText}>Comment</Text>\n              <TouchableOpacity\n                  style={styles.close}\n                  onPress={() => {\n                    setModalVisible(!modalVisible);\n                  }}\n                >\n                  <AntDesign name=\"close\" size={24} color=\"black\" />\n              </TouchableOpacity>\n            </View>\n            <View style={styles.comment}>\n              <FlatList\n                data={comment}\n                keyExtractor= {item => item.comment_id.toString()}\n                showsHorizontalScrollIndicator={false}\n                renderItem={({ item }) => (\n                    <View style={styles.commentContent}>         \n                        <Image \n                          style={styles.commentImg}\n                          source={{ uri: item.user_avatar }}\n                        />\n                        <View>\n                          <Text style={{fontWeight: 'bold'}}>{item.fullname}</Text>\n                          <Text>{item.comment_content}</Text>\n                        </View>\n                    </View>\n                )}  \n                ListEmptyComponent={ListEmpty}\n              /> \n            </View>\n            <View style={{justifyContent: 'flex-end', backgroundColor: '#aa4fff', width: '100%', height: 50, flexDirection: 'row', paddingRight: 5, marginBottom: 30}}>\n              <TextInput\n                style={{ height: 40, margin: 5, backgroundColor: 'white', width: '80%'}}\n                autoCorrect={false}\n                value={contentComent}\n                onSubmitEditing={() => submitComment()}\n                onChangeText={text =>  setContentComent(text)}\n              />\n              <TouchableOpacity onPress={() => submitComment()}>\n                <Ionicons name=\"md-send\" size={45} color=\"white\" style={{ marginLeft: 10, marginRight: 10}} />\n              </TouchableOpacity>\n            </View>\n          </View>\n      </Modal>\n    </View>\n  )   \n} export {ReadingScreen};\n \nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        justifyContent: 'flex-start',\n        flexDirection: 'column',\n        alignItems: 'center',\n        //marginTop: 25,\n        borderColor: '#8a2be2',\n    },\n    tabView: {\n      justifyContent: 'flex-end', \n      backgroundColor: '#aa4fff', \n      width: '100%', \n      height: 40, \n      paddingRight: 5\n    },\n    tabContainer: {\n      flex: 1, \n      height: 40,  \n      width: Dimensions.get('window').width,  \n      backgroundColor: 'white', \n      alignItems: 'center', \n      justifyContent: 'space-around', \n      flexDirection: 'row'\n    },\n    modalView: {\n      backgroundColor: \"white\",\n      shadowColor: \"#000\",\n      width: Dimensions.get('window').width, \n      height: Dimensions.get('window').height,\n    },\n    HeaderModal: {\n      justifyContent: 'flex-start',\n      alignItems: 'center',\n      flexDirection: 'row',\n      backgroundColor: '#EEEEEE',\n      height: 40,\n      shadowColor: \"#000\",\n      shadowOffset: {\n        width: 0,\n        height: 2\n      },\n      shadowOpacity: 0.25,\n      shadowRadius: 3.84,\n      elevation: 5,\n    },\n    HeaderText: {\n      fontSize: 20,\n      fontWeight: 'bold',\n      marginLeft: 10,\n      flex: 1\n    },\n    close: {\n      flex: -1,\n      marginRight: 10\n    },\n    comment: {\n      padding: 5,\n      flex: 3\n    },\n    commentImg: {\n      width: 60,\n      height: 60,\n      borderRadius: 50,\n      marginLeft: 10,\n      marginRight: 10\n    },\n    commentContent: {\n      flexDirection: 'row',\n      margin: 5\n    }\n});"]},"metadata":{},"sourceType":"module"}