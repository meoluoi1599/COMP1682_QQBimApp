{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"D:\\\\QQBimApp\\\\QQBimApp\\\\src\\\\users\\\\ScreemFolder\\\\StoryScreen\\\\NewPart.js\";\nimport React from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport AsyncStorage from \"react-native-web/dist/exports/AsyncStorage\";\nimport ToastAndroid from \"react-native-web/dist/exports/ToastAndroid\";\nimport StatusBar from \"react-native-web/dist/exports/StatusBar\";\nimport { ScrollView } from 'react-native-gesture-handler';\nimport { Dropdown } from 'react-native-material-dropdown-v2';\nimport { useFocusEffect } from '@react-navigation/native';\n\nfunction NewPart(props) {\n  var _React$useState = React.useState(''),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      title = _React$useState2[0],\n      setTitle = _React$useState2[1];\n\n  var _React$useState3 = React.useState(''),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      chapterContent = _React$useState4[0],\n      setChapterContent = _React$useState4[1];\n\n  var _React$useState5 = React.useState('On Writing'),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      storyStatus = _React$useState6[0],\n      setStoryStatus = _React$useState6[1];\n\n  var _React$useState7 = React.useState([]),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      newPart = _React$useState8[0],\n      setNewPart = _React$useState8[1];\n\n  var _React$useState9 = React.useState([]),\n      _React$useState10 = _slicedToArray(_React$useState9, 2),\n      dataUser = _React$useState10[0],\n      setDataUser = _React$useState10[1];\n\n  var data = [{\n    value: 'On Writing'\n  }, {\n    value: 'Drop'\n  }, {\n    value: 'Full'\n  }];\n\n  var getData = function getData() {\n    return _regeneratorRuntime.async(function getData$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            try {\n              AsyncStorage.getItem('user').then(function (value) {\n                var jsonValue = JSON.parse(value);\n                setDataUser(jsonValue);\n              });\n            } catch (e) {\n              console.log(e);\n            }\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useFocusEffect(React.useCallback(function () {\n    props.navigation.dangerouslyGetParent().setOptions({\n      tabBarVisible: false\n    });\n    getData();\n    fetch('http://192.168.0.100:19000/get_story/' + props.route.params.item.story_id).then(function (response) {\n      return response.json();\n    }).then(function (res) {\n      var newPart = res[0].parts + 1;\n      setNewPart(newPart);\n      setChapterContent('');\n      setTitle('');\n    }).catch(function (error) {\n      console.log(error);\n    }).finally(function () {\n      setLoading(false);\n    });\n    return function () {\n      props.navigation.dangerouslyGetParent().setOptions({\n        tabBarVisible: true\n      });\n    };\n  }, []));\n\n  var addNewNotification = function addNewNotification() {\n    fetch('http://192.168.0.100:19000/newNotification', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        'user_id': dataUser.user_id,\n        'content': 'Add new chapter of ' + props.route.params.item.story_title\n      })\n    }).then(function (response) {\n      return response.json();\n    }).then(function (res) {\n      console.log('susses');\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  var upload_chapter = function upload_chapter() {\n    if (title.length == 0 || chapterContent.length == 0) {\n      alert('Title and content must have content.');\n    } else {\n      fetch('http://192.168.0.100:19000/upload_chapter', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          'story_id': props.route.params.item.story_id,\n          'chapter_name': title,\n          'chapter_content': chapterContent,\n          'story_status': storyStatus,\n          'parts': newPart\n        })\n      }).then(function (response) {\n        return response.json();\n      }).then(function (res) {\n        ToastAndroid.show(\"Upload sucessfull!\", ToastAndroid.SHORT);\n        setTitle('');\n        setChapterContent('');\n        addNewNotification();\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  };\n\n  return React.createElement(ScrollView, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }\n  }, React.createElement(StatusBar, {\n    hidden: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  }), React.createElement(View, {\n    style: styles.main,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }, React.createElement(Text, {\n    style: {\n      fontSize: 16,\n      fontWeight: 'bold'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 17\n    }\n  }, \"Chapter title:\"), React.createElement(TextInput, {\n    style: {\n      height: 40,\n      backgroundColor: 'white'\n    },\n    value: title,\n    placeholder: \"Enter your chapter's title\",\n    onChangeText: function onChangeText(text) {\n      return setTitle(text);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 17\n    }\n  }), React.createElement(Text, {\n    style: {\n      marginTop: 10,\n      fontSize: 16,\n      fontWeight: 'bold'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 17\n    }\n  }, \"Content of chapter:\"), React.createElement(View, {\n    scrollEnabled: true,\n    style: {\n      marginTop: 10,\n      backgroundColor: 'white'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 17\n    }\n  }, React.createElement(TextInput, {\n    multiline: true,\n    placeholder: \"Chapter's content of your story\",\n    textAlignVertical: 'top',\n    numberOfLines: 20,\n    value: chapterContent,\n    scrollEnabled: true,\n    onChangeText: function onChangeText(text) {\n      return setChapterContent(text);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 21\n    }\n  })), React.createElement(Dropdown, {\n    label: \"Please slect status of story\",\n    data: data,\n    onChangeText: function onChangeText(value) {\n      setStoryStatus(value);\n    },\n    value: data[0].value,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 17\n    }\n  }), React.createElement(TouchableOpacity, {\n    style: styles.upload,\n    onPress: function onPress() {\n      upload_chapter();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }, React.createElement(Text, {\n    style: {\n      textAlign: 'center',\n      color: 'white'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 92\n    }\n  }, \"Upload your chapter\"))));\n}\n\nexport { NewPart };\nvar styles = StyleSheet.create({\n  main: {\n    paddingLeft: 30,\n    paddingRight: 30,\n    paddingBottom: 1,\n    alignItems: 'stretch'\n  },\n  upload: {\n    marginTop: 20,\n    paddingTop: 15,\n    paddingBottom: 15,\n    backgroundColor: '#aa4fff',\n    borderRadius: 50,\n    borderWidth: 1,\n    borderColor: '#fff'\n  }\n});","map":{"version":3,"sources":["D:/QQBimApp/QQBimApp/src/users/ScreemFolder/StoryScreen/NewPart.js"],"names":["React","ScrollView","Dropdown","useFocusEffect","NewPart","props","useState","title","setTitle","chapterContent","setChapterContent","storyStatus","setStoryStatus","newPart","setNewPart","dataUser","setDataUser","data","value","getData","AsyncStorage","getItem","then","jsonValue","JSON","parse","e","console","log","useCallback","navigation","dangerouslyGetParent","setOptions","tabBarVisible","fetch","route","params","item","story_id","response","json","res","parts","catch","error","finally","setLoading","addNewNotification","method","headers","Accept","body","stringify","user_id","story_title","upload_chapter","length","alert","ToastAndroid","show","SHORT","styles","main","fontSize","fontWeight","height","backgroundColor","text","marginTop","upload","textAlign","color","StyleSheet","create","paddingLeft","paddingRight","paddingBottom","alignItems","paddingTop","borderRadius","borderWidth","borderColor"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;;;;;;;;;AAEA,SAASC,UAAT,QAA2B,8BAA3B;AACA,SAASC,QAAT,QAAyB,mCAAzB;AACA,SAASC,cAAT,QAA+B,0BAA/B;;AAEA,SAASC,OAAT,CAAiBC,KAAjB,EAAwB;AAAA,wBACML,KAAK,CAACM,QAAN,CAAe,EAAf,CADN;AAAA;AAAA,MACbC,KADa;AAAA,MACNC,QADM;;AAAA,yBAEwBR,KAAK,CAACM,QAAN,CAAe,EAAf,CAFxB;AAAA;AAAA,MAEbG,cAFa;AAAA,MAEGC,iBAFH;;AAAA,yBAGkBV,KAAK,CAACM,QAAN,CAAe,YAAf,CAHlB;AAAA;AAAA,MAGbK,WAHa;AAAA,MAGAC,cAHA;;AAAA,yBAIUZ,KAAK,CAACM,QAAN,CAAe,EAAf,CAJV;AAAA;AAAA,MAIbO,OAJa;AAAA,MAIJC,UAJI;;AAAA,yBAKYd,KAAK,CAACM,QAAN,CAAe,EAAf,CALZ;AAAA;AAAA,MAKbS,QALa;AAAA,MAKHC,WALG;;AAOpB,MAAIC,IAAI,GAAG,CAAC;AACRC,IAAAA,KAAK,EAAE;AADC,GAAD,EAEJ;AACHA,IAAAA,KAAK,EAAE;AADJ,GAFI,EAIN;AACDA,IAAAA,KAAK,EAAE;AADN,GAJM,CAAX;;AAOA,MAAMC,OAAO,GAAG,SAAVA,OAAU;AAAA;AAAA;AAAA;AAAA;AACZ,gBAAI;AACFC,cAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAA7B,CAAkC,UAACJ,KAAD,EAAW;AAC3C,oBAAMK,SAAS,GAAGC,IAAI,CAACC,KAAL,CAAWP,KAAX,CAAlB;AACAF,gBAAAA,WAAW,CAACO,SAAD,CAAX;AACD,eAHD;AAID,aALD,CAKE,OAAMG,CAAN,EAAS;AACTC,cAAAA,OAAO,CAACC,GAAR,CAAYF,CAAZ;AACD;;AARW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAhB;;AAWEvB,EAAAA,cAAc,CACZH,KAAK,CAAC6B,WAAN,CAAkB,YAAM;AACxBxB,IAAAA,KAAK,CAACyB,UAAN,CAAiBC,oBAAjB,GAAwCC,UAAxC,CAAmD;AACjDC,MAAAA,aAAa,EAAE;AADkC,KAAnD;AAGAd,IAAAA,OAAO;AACPe,IAAAA,KAAK,CAAC,0CAA0C7B,KAAK,CAAC8B,KAAN,CAAYC,MAAZ,CAAmBC,IAAnB,CAAwBC,QAAnE,CAAL,CACChB,IADD,CACO,UAACiB,QAAD;AAAA,aAAcA,QAAQ,CAACC,IAAT,EAAd;AAAA,KADP,EAEClB,IAFD,CAEQ,UAACmB,GAAD,EAAS;AACb,UAAM5B,OAAO,GAAG4B,GAAG,CAAC,CAAD,CAAH,CAAOC,KAAP,GAAe,CAA/B;AACA5B,MAAAA,UAAU,CAACD,OAAD,CAAV;AACAH,MAAAA,iBAAiB,CAAC,EAAD,CAAjB;AACAF,MAAAA,QAAQ,CAAC,EAAD,CAAR;AACH,KAPD,EAQCmC,KARD,CAQQ,UAACC,KAAD,EAAW;AACjBjB,MAAAA,OAAO,CAACC,GAAR,CAAYgB,KAAZ;AACD,KAVD,EAWCC,OAXD,CAWS,YAAM;AACbC,MAAAA,UAAU,CAAC,KAAD,CAAV;AACD,KAbD;AAcA,WAAO,YAAM;AACXzC,MAAAA,KAAK,CAACyB,UAAN,CAAiBC,oBAAjB,GAAwCC,UAAxC,CAAmD;AACjDC,QAAAA,aAAa,EAAE;AADkC,OAAnD;AAEC,KAHH;AAID,GAvBC,EAuBA,EAvBA,CADY,CAAd;;AA0BF,MAAMc,kBAAkB,GAAG,SAArBA,kBAAqB,GAAM;AAC7Bb,IAAAA,KAAK,CAAC,4CAAD,EAA+C;AAChDc,MAAAA,MAAM,EAAE,MADwC;AAEhDC,MAAAA,OAAO,EAAE;AACLC,QAAAA,MAAM,EAAE,kBADH;AAEL,wBAAgB;AAFX,OAFuC;AAMhDC,MAAAA,IAAI,EAAE3B,IAAI,CAAC4B,SAAL,CAAe;AACjB,mBAAWrC,QAAQ,CAACsC,OADH;AAEjB,mBAAW,wBAAuBhD,KAAK,CAAC8B,KAAN,CAAYC,MAAZ,CAAmBC,IAAnB,CAAwBiB;AAFzC,OAAf;AAN0C,KAA/C,CAAL,CAWChC,IAXD,CAWO,UAACiB,QAAD;AAAA,aAAcA,QAAQ,CAACC,IAAT,EAAd;AAAA,KAXP,EAYClB,IAZD,CAYQ,UAACmB,GAAD,EAAS;AACbd,MAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACH,KAdD,EAeCe,KAfD,CAeQ,UAACC,KAAD,EAAW;AACfjB,MAAAA,OAAO,CAACC,GAAR,CAAYgB,KAAZ;AACH,KAjBD;AAkBH,GAnBD;;AAqBA,MAAMW,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAEzB,QAAGhD,KAAK,CAACiD,MAAN,IAAgB,CAAhB,IAAqB/C,cAAc,CAAC+C,MAAf,IAAyB,CAAjD,EAAmD;AAC/CC,MAAAA,KAAK,CAAC,sCAAD,CAAL;AACH,KAFD,MAEO;AAEHvB,MAAAA,KAAK,CAAC,2CAAD,EAA8C;AAC/Cc,QAAAA,MAAM,EAAE,MADuC;AAE/CC,QAAAA,OAAO,EAAE;AACLC,UAAAA,MAAM,EAAE,kBADH;AAEL,0BAAgB;AAFX,SAFsC;AAM/CC,QAAAA,IAAI,EAAE3B,IAAI,CAAC4B,SAAL,CAAe;AACjB,sBAAY/C,KAAK,CAAC8B,KAAN,CAAYC,MAAZ,CAAmBC,IAAnB,CAAwBC,QADnB;AAEjB,0BAAgB/B,KAFC;AAGjB,6BAAmBE,cAHF;AAIjB,0BAAgBE,WAJC;AAKjB,mBAASE;AALQ,SAAf;AANyC,OAA9C,CAAL,CAcCS,IAdD,CAcO,UAACiB,QAAD;AAAA,eAAcA,QAAQ,CAACC,IAAT,EAAd;AAAA,OAdP,EAeClB,IAfD,CAeQ,UAACmB,GAAD,EAAS;AACbiB,QAAAA,YAAY,CAACC,IAAb,CAAkB,oBAAlB,EAAwCD,YAAY,CAACE,KAArD;AACApD,QAAAA,QAAQ,CAAC,EAAD,CAAR;AACAE,QAAAA,iBAAiB,CAAC,EAAD,CAAjB;AACAqC,QAAAA,kBAAkB;AACrB,OApBD,EAqBCJ,KArBD,CAqBQ,UAACC,KAAD,EAAW;AACfjB,QAAAA,OAAO,CAACC,GAAR,CAAYgB,KAAZ;AACH,OAvBD;AAwBH;AACJ,GA/BD;;AAiCA,SACI,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,SAAD;AAAW,IAAA,MAAM,MAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,EAEI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAEiB,MAAM,CAACC,IAApB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAGC,MAAAA,QAAQ,EAAE,EAAb;AAAiBC,MAAAA,UAAU,EAAE;AAA7B,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADJ,EAEI,oBAAC,SAAD;AACI,IAAA,KAAK,EAAE;AAAEC,MAAAA,MAAM,EAAE,EAAV;AAAcC,MAAAA,eAAe,EAAE;AAA/B,KADX;AAEI,IAAA,KAAK,EAAE3D,KAFX;AAGI,IAAA,WAAW,EAAC,4BAHhB;AAII,IAAA,YAAY,EAAE,sBAAA4D,IAAI;AAAA,aAAI3D,QAAQ,CAAC2D,IAAD,CAAZ;AAAA,KAJtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,EAQI,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAAEC,MAAAA,SAAS,EAAE,EAAb;AAAiBL,MAAAA,QAAQ,EAAE,EAA3B;AAA+BC,MAAAA,UAAU,EAAE;AAA3C,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BARJ,EASI,oBAAC,IAAD;AAAM,IAAA,aAAa,MAAnB;AAAqB,IAAA,KAAK,EAAE;AAAEI,MAAAA,SAAS,EAAE,EAAb;AAAiBF,MAAAA,eAAe,EAAE;AAAlC,KAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACI,oBAAC,SAAD;AACI,IAAA,SAAS,MADb;AAEI,IAAA,WAAW,EAAC,iCAFhB;AAGI,IAAA,iBAAiB,EAAE,KAHvB;AAII,IAAA,aAAa,EAAE,EAJnB;AAKI,IAAA,KAAK,EAAEzD,cALX;AAMI,IAAA,aAAa,EAAE,IANnB;AAOI,IAAA,YAAY,EAAE,sBAAA0D,IAAI;AAAA,aAAIzD,iBAAiB,CAACyD,IAAD,CAArB;AAAA,KAPtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,CATJ,EAoBI,oBAAC,QAAD;AACI,IAAA,KAAK,EAAC,8BADV;AAEI,IAAA,IAAI,EAAIlD,IAFZ;AAGI,IAAA,YAAY,EAAE,sBAACC,KAAD,EAAS;AAACN,MAAAA,cAAc,CAACM,KAAD,CAAd;AAAsB,KAHlD;AAII,IAAA,KAAK,EAAID,IAAI,CAAC,CAAD,CAAJ,CAAQC,KAJrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IApBJ,EA0BI,oBAAC,gBAAD;AAAkB,IAAA,KAAK,EAAE2C,MAAM,CAACQ,MAAhC;AAAwC,IAAA,OAAO,EAAE,mBAAK;AAACd,MAAAA,cAAc;AAAI,KAAzE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA2E,oBAAC,IAAD;AAAM,IAAA,KAAK,EAAE;AAACe,MAAAA,SAAS,EAAE,QAAZ;AAAsBC,MAAAA,KAAK,EAAE;AAA7B,KAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,2BAA3E,CA1BJ,CAFJ,CADJ;AAiCH;;AAAC,SAAQnE,OAAR;AAEF,IAAIyD,MAAM,GAAGW,UAAU,CAACC,MAAX,CAAkB;AAC3BX,EAAAA,IAAI,EAAE;AACFY,IAAAA,WAAW,EAAE,EADX;AAEFC,IAAAA,YAAY,EAAE,EAFZ;AAGFC,IAAAA,aAAa,EAAE,CAHb;AAIFC,IAAAA,UAAU,EAAE;AAJV,GADqB;AAO3BR,EAAAA,MAAM,EAAC;AACHD,IAAAA,SAAS,EAAE,EADR;AAEHU,IAAAA,UAAU,EAAE,EAFT;AAGHF,IAAAA,aAAa,EAAE,EAHZ;AAIHV,IAAAA,eAAe,EAAC,SAJb;AAKHa,IAAAA,YAAY,EAAE,EALX;AAMHC,IAAAA,WAAW,EAAE,CANV;AAOHC,IAAAA,WAAW,EAAE;AAPV;AAPoB,CAAlB,CAAb","sourcesContent":["import React from 'react';\r\nimport { StyleSheet, View, Text, TextInput, TouchableOpacity, AsyncStorage, ToastAndroid, StatusBar} from 'react-native';\r\nimport { ScrollView } from 'react-native-gesture-handler';\r\nimport { Dropdown } from 'react-native-material-dropdown-v2';\r\nimport { useFocusEffect } from '@react-navigation/native';\r\n \r\nfunction NewPart(props) {\r\n    const [title, setTitle] = React.useState('');\r\n    const [chapterContent, setChapterContent] = React.useState('');\r\n    const [storyStatus, setStoryStatus] = React.useState('On Writing');\r\n    const [newPart, setNewPart] = React.useState([]);\r\n    const [dataUser, setDataUser ]= React.useState([]);\r\n\r\n    let data = [{\r\n        value: 'On Writing',\r\n        }, {\r\n        value: 'Drop',\r\n      }, {\r\n        value: 'Full',\r\n    }];\r\n    const getData = async () => {\r\n        try {\r\n          AsyncStorage.getItem('user').then((value) => {\r\n            const jsonValue = JSON.parse(value);\r\n            setDataUser(jsonValue);\r\n          })\r\n        } catch(e) {\r\n          console.log(e)\r\n        }\r\n      }\r\n\r\n      useFocusEffect(\r\n        React.useCallback(() => {\r\n        props.navigation.dangerouslyGetParent().setOptions({\r\n          tabBarVisible: false\r\n        });\r\n        getData();\r\n        fetch('http://192.168.0.100:19000/get_story/' + props.route.params.item.story_id)\r\n        .then ((response) => response.json())\r\n        .then ( (res) => { \r\n            const newPart = res[0].parts + 1;\r\n            setNewPart(newPart);\r\n            setChapterContent('');\r\n            setTitle('');\r\n        })\r\n        .catch ((error) => {\r\n          console.log(error);\r\n        })\r\n        .finally(() => {\r\n          setLoading(false) \r\n        });\r\n        return () => {\r\n          props.navigation.dangerouslyGetParent().setOptions({\r\n            tabBarVisible: true\r\n        })}\r\n      },[]));\r\n\r\n    const addNewNotification = () => {\r\n        fetch('http://192.168.0.100:19000/newNotification', {\r\n            method: 'POST',\r\n            headers: {\r\n                Accept: 'application/json',\r\n                'Content-Type': 'application/json',\r\n            },\r\n            body: JSON.stringify({\r\n                'user_id': dataUser.user_id,\r\n                'content': 'Add new chapter of '+ props.route.params.item.story_title,\r\n            })\r\n        })\r\n        .then ((response) => response.json())\r\n        .then ( (res) => { \r\n            console.log('susses');\r\n        })\r\n        .catch ((error) => {\r\n            console.log(error);\r\n        })\r\n    }\r\n\r\n    const upload_chapter = () => {\r\n        \r\n        if(title.length == 0 || chapterContent.length == 0){\r\n            alert('Title and content must have content.');\r\n        } else {\r\n           \r\n            fetch('http://192.168.0.100:19000/upload_chapter', {\r\n                method: 'POST',\r\n                headers: {\r\n                    Accept: 'application/json',\r\n                    'Content-Type': 'application/json',\r\n                },\r\n                body: JSON.stringify({\r\n                    'story_id': props.route.params.item.story_id,\r\n                    'chapter_name': title,\r\n                    'chapter_content': chapterContent,\r\n                    'story_status': storyStatus,\r\n                    'parts': newPart\r\n                })\r\n            })\r\n            .then ((response) => response.json())\r\n            .then ( (res) => { \r\n                ToastAndroid.show(\"Upload sucessfull!\", ToastAndroid.SHORT);\r\n                setTitle('');\r\n                setChapterContent('');\r\n                addNewNotification();\r\n            })\r\n            .catch ((error) => {\r\n                console.log(error);\r\n            })\r\n        }\r\n    }\r\n\r\n    return (\r\n        <ScrollView>\r\n            <StatusBar hidden/>\r\n            <View style={styles.main}>\r\n                <Text style={{  fontSize: 16, fontWeight: 'bold'}}>Chapter title:</Text>\r\n                <TextInput\r\n                    style={{ height: 40, backgroundColor: 'white' }}\r\n                    value={title}\r\n                    placeholder=\"Enter your chapter's title\"\r\n                    onChangeText={text => setTitle(text)}\r\n                />\r\n                <Text style={{ marginTop: 10, fontSize: 16, fontWeight: 'bold'}}>Content of chapter:</Text>  \r\n                <View scrollEnabled  style={{ marginTop: 10, backgroundColor: 'white'}} >\r\n                    <TextInput \r\n                        multiline \r\n                        placeholder=\"Chapter's content of your story\" \r\n                        textAlignVertical={'top'}\r\n                        numberOfLines={20} \r\n                        value={chapterContent}\r\n                        scrollEnabled={true} \r\n                        onChangeText={text => setChapterContent(text)} \r\n                    />\r\n                </View>\r\n                <Dropdown\r\n                    label='Please slect status of story'\r\n                    data = {data}\r\n                    onChangeText={(value)=>{setStoryStatus(value)}}   \r\n                    value = {data[0].value}\r\n                />\r\n                <TouchableOpacity style={styles.upload} onPress={()=> {upload_chapter();}}><Text style={{textAlign: 'center', color: 'white'}}>Upload your chapter</Text></TouchableOpacity>\r\n            </View>\r\n        </ScrollView>\r\n    )\r\n} export {NewPart};\r\n \r\nvar styles = StyleSheet.create({\r\n    main: {\r\n        paddingLeft: 30,\r\n        paddingRight: 30,\r\n        paddingBottom: 1,\r\n        alignItems: 'stretch',\r\n    },\r\n    upload:{\r\n        marginTop: 20,\r\n        paddingTop: 15,\r\n        paddingBottom: 15,\r\n        backgroundColor:'#aa4fff',\r\n        borderRadius: 50,\r\n        borderWidth: 1,\r\n        borderColor: '#fff'\r\n    },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}