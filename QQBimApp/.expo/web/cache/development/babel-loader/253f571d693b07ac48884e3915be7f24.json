{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"D:\\\\QQBimApp\\\\QQBimApp\\\\src\\\\ScreemFolder\\\\StoryScreen\\\\ListChapterScreen.js\";\nimport * as React from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport Modal from \"react-native-web/dist/exports/Modal\";\nimport { SplashScreen } from \"../OtherScreen\";\nimport { DetailStoryScreen } from \"./DetailStoryScreen\";\nimport { Ionicons } from '@expo/vector-icons';\n\nfunction ListChapterScreen(props) {\n  var _React$useState = React.useState([]),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      dataSource = _React$useState2[0],\n      setDataSource = _React$useState2[1];\n\n  var _React$useState3 = React.useState(true),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      isLoading = _React$useState4[0],\n      setLoading = _React$useState4[1];\n\n  var _React$useState5 = React.useState(false),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      modalVisible = _React$useState6[0],\n      setModalVisible = _React$useState6[1];\n\n  var story_id = props.route.params.item.story_id;\n\n  var _React$useState7 = React.useState([]),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      story = _React$useState8[0],\n      setStory = _React$useState8[1];\n\n  var data = [{\n    id: \"1\"\n  }];\n  React.useEffect(function () {\n    fetch('http://192.168.1.6:19000/chapter/' + story_id).then(function (response) {\n      return response.json();\n    }).then(function (res) {\n      console.log('kq:' + res);\n      setDataSource(res);\n    }).catch(function (error) {\n      console.log(error);\n    }).finally(function () {\n      setLoading(false);\n    });\n  });\n\n  function deleteChapter() {\n    Alert.alert(\"Do you want to delete your story's chapter?\", \"If you choose OK, story's chapter will delete forever.\", [{\n      text: \"Cancel\",\n      onPress: function onPress() {\n        return console.log(\"Cancel Pressed\");\n      },\n      style: \"cancel\"\n    }, {\n      text: \"OK\",\n      onPress: function onPress() {\n        fetch('http://192.168.1.6:19000/delete_chapter/' + story.story_id + '/' + story.chapter_id).then(function (response) {\n          return response.json();\n        }).then(function (res) {\n          console.log('kq:' + res);\n        }).catch(function (error) {\n          console.log(error);\n        }).finally(function () {\n          setLoading(false);\n          setModalVisible(false);\n        });\n      }\n    }], {\n      cancelable: false\n    });\n  }\n\n  ;\n\n  function ListEmpty() {\n    return React.createElement(View, {\n      style: style.MainContainer,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 7\n      }\n    }, React.createElement(View, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }\n    }, React.createElement(Text, {\n      style: {\n        fontSize: 20,\n        color: 'black',\n        marginTop: 20,\n        marginBottom: 20\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 13\n      }\n    }, \"You don't have any chapter\")));\n  }\n\n  ;\n  return React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 5\n    }\n  }, isLoading ? React.createElement(SplashScreen, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 18\n    }\n  }) : React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }\n  }, React.createElement(FlatList, {\n    data: data,\n    renderItem: function renderItem(item) {\n      return React.createElement(React.Fragment, null, React.createElement(View, {\n        style: {\n          alignItems: \"center\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 17\n        }\n      }, React.createElement(Image, {\n        style: style.imageModal,\n        source: {\n          uri: props.route.params.item.story_img\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }\n      }), React.createElement(Text, {\n        style: style.title,\n        numberOfLines: 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }\n      }, props.route.params.item.story_title), React.createElement(TouchableOpacity, {\n        style: style.createBotton,\n        onPress: function onPress() {\n          props.navigation.navigate('NewPart', {\n            story_id: props.route.params.item.story_id\n          });\n          setModalVisible(false);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }\n      }, React.createElement(Text, {\n        style: {\n          color: 'white',\n          fontWeight: 'bold',\n          fontSize: 18\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 25\n        }\n      }, \"Create new chapter\"))), React.createElement(FlatList, {\n        data: dataSource,\n        keyExtractor: function keyExtractor(item) {\n          return item.chapter_id.toString();\n        },\n        renderItem: function renderItem(_ref) {\n          var item = _ref.item;\n          return React.createElement(TouchableOpacity, {\n            onPress: function onPress() {\n              setModalVisible(!modalVisible), setStory(item);\n            },\n            style: style.chapter,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 21\n            }\n          }, React.createElement(Text, {\n            numberOfLines: 1,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 25\n            }\n          }, item.chapter_name));\n        },\n        showsHorizontalScrollIndicator: false,\n        ListEmptyComponent: ListEmpty,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 17\n        }\n      }), React.createElement(Modal, {\n        animationType: \"slide\",\n        transparent: true,\n        visible: modalVisible,\n        onRequestClose: function onRequestClose() {\n          setModalVisible(!modalVisible);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 17\n        }\n      }, React.createElement(View, {\n        style: style.centeredView,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 21\n        }\n      }, React.createElement(View, {\n        style: style.modalView,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }\n      }, React.createElement(TouchableOpacity, {\n        style: style.modalbutton,\n        onPress: function onPress() {\n          props.navigation.navigate('EditPart', {\n            item: story\n          });\n          setModalVisible(false);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 25\n        }\n      }, React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 29\n        }\n      }, \"Edit Chapter\")), React.createElement(TouchableOpacity, {\n        style: style.modalbutton,\n        onPress: function onPress() {\n          deleteChapter();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 25\n        }\n      }, React.createElement(Text, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 29\n        }\n      }, \"Delete Chapter\")), React.createElement(TouchableOpacity, {\n        style: {\n          marginTop: 10,\n          alignItems: 'center'\n        },\n        onPress: function onPress() {\n          setModalVisible(!modalVisible);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 25\n        }\n      }, React.createElement(Ionicons, {\n        name: \"ios-close-circle-outline\",\n        size: 50,\n        color: \"#aa4fff\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 25\n        }\n      }))))));\n    },\n    ListEmptyComponent: ListEmpty,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 9\n    }\n  })));\n}\n\nexport { ListChapterScreen };\nvar style = StyleSheet.create({\n  MainContainer: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    flex: 1,\n    margin: 10\n  },\n  imageModal: {\n    width: 150,\n    height: 200,\n    marginTop: 20\n  },\n  createBotton: {\n    borderRadius: 40,\n    backgroundColor: '#aa4fff',\n    padding: 10,\n    marginTop: 10\n  },\n  title: {\n    fontSize: 20,\n    fontWeight: 'bold',\n    marginTop: 10,\n    marginBottom: 10\n  },\n  chapter: {\n    padding: 10,\n    borderBottomWidth: 0.5,\n    borderBottomColor: 'grey'\n  },\n  centeredView: {\n    flex: 1,\n    justifyContent: \"center\",\n    alignItems: \"center\",\n    marginTop: 22\n  },\n  modalView: {\n    margin: 20,\n    width: Dimensions.get('window').width * 0.7,\n    backgroundColor: \"white\",\n    borderRadius: 20,\n    padding: 10,\n    shadowColor: \"#000\",\n    shadowOffset: {\n      width: 0,\n      height: 2\n    },\n    shadowOpacity: 0.25,\n    shadowRadius: 3.84,\n    elevation: 5\n  },\n  openButton: {\n    backgroundColor: \"#F194FF\",\n    borderRadius: 20,\n    padding: 10,\n    elevation: 2\n  },\n  modalbutton: {\n    padding: 10,\n    borderBottomWidth: 1\n  }\n});","map":{"version":3,"sources":["D:/QQBimApp/QQBimApp/src/ScreemFolder/StoryScreen/ListChapterScreen.js"],"names":["React","SplashScreen","DetailStoryScreen","Ionicons","ListChapterScreen","props","useState","dataSource","setDataSource","isLoading","setLoading","modalVisible","setModalVisible","story_id","route","params","item","story","setStory","data","id","useEffect","fetch","then","response","json","res","console","log","catch","error","finally","deleteChapter","Alert","alert","text","onPress","style","chapter_id","cancelable","ListEmpty","MainContainer","fontSize","color","marginTop","marginBottom","alignItems","imageModal","uri","story_img","title","story_title","createBotton","navigation","navigate","fontWeight","toString","chapter","chapter_name","centeredView","modalView","modalbutton","StyleSheet","create","justifyContent","flex","margin","width","height","borderRadius","backgroundColor","padding","borderBottomWidth","borderBottomColor","Dimensions","get","shadowColor","shadowOffset","shadowOpacity","shadowRadius","elevation","openButton"],"mappings":"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","sourcesContent":["import * as React from 'react';\r\nimport { \r\n  View, \r\n  FlatList,\r\n  TouchableOpacity, \r\n  Text,\r\n  StyleSheet,\r\n  Image,\r\n  Dimensions,\r\n  Alert,\r\n  Modal\r\n} from 'react-native';\r\nimport {SplashScreen} from '../OtherScreen';\r\nimport { DetailStoryScreen } from './DetailStoryScreen';\r\nimport { Ionicons } from '@expo/vector-icons'; \r\n\r\nfunction ListChapterScreen(props) {\r\n  const [dataSource, setDataSource ]= React.useState([]);\r\n  const [isLoading, setLoading] = React.useState(true);\r\n  const [modalVisible, setModalVisible] = React.useState(false);\r\n  const story_id = props.route.params.item.story_id;\r\n  const [story, setStory] = React.useState([]);\r\n  const data = [\r\n    {id:\"1\"}\r\n    ]\r\n\r\n  React.useEffect(() => {\r\n    // fetch('http://10.0.2.2:5000/')\r\n    fetch('http://192.168.1.6:19000/chapter/' + story_id)\r\n    .then ((response) => response.json())\r\n    .then ( (res) => { \r\n      console.log('kq:' + res); \r\n      setDataSource(res);\r\n    })\r\n    .catch ((error) => {\r\n      console.log(error);\r\n    })\r\n    .finally(() => {\r\n      setLoading(false) \r\n    });\r\n  });\r\n\r\n  function deleteChapter() {\r\n    Alert.alert(\r\n      \"Do you want to delete your story's chapter?\",\r\n      \"If you choose OK, story's chapter will delete forever.\",\r\n      [\r\n        {\r\n          text: \"Cancel\",\r\n          onPress: () => console.log(\"Cancel Pressed\"),\r\n          style: \"cancel\"\r\n        },\r\n        { text: \"OK\", onPress: () => {\r\n          fetch('http://192.168.1.6:19000/delete_chapter/' + story.story_id + '/' + story.chapter_id)\r\n          .then ((response) => response.json())\r\n          .then ( (res) => { \r\n            console.log('kq:' + res); \r\n          })\r\n          .catch ((error) => {\r\n            console.log(error);\r\n          })\r\n          .finally(() => {\r\n            setLoading(false);\r\n            setModalVisible(false);\r\n          });\r\n        } }\r\n      ],\r\n      { cancelable: false }\r\n    ); \r\n  };\r\n\r\n  function ListEmpty() {\r\n    return (\r\n      //View to show when list is empty\r\n      <View style={style.MainContainer}>  \r\n          <View>\r\n            <Text style={{fontSize: 20, color: 'black', marginTop: 20, marginBottom: 20}}>You don't have any chapter</Text>\r\n          </View>\r\n      </View>\r\n    );\r\n  };\r\n  return (\r\n    <View>\r\n    {isLoading ? <SplashScreen/> : (\r\n      <View>\r\n        <FlatList\r\n            data={data}\r\n            renderItem={(item) => (\r\n                <>\r\n                <View style={{alignItems: \"center\"}}>\r\n                    <Image style={style.imageModal}\r\n                        source={{uri: props.route.params.item.story_img}} \r\n                    />\r\n                    <Text style={style.title} numberOfLines={2}>{props.route.params.item.story_title}</Text>\r\n                    <TouchableOpacity style={style.createBotton} onPress={() => {props.navigation.navigate('NewPart', {story_id: props.route.params.item.story_id}); setModalVisible(false)}}>\r\n                        <Text style={{color:'white', fontWeight: 'bold', fontSize: 18}}>Create new chapter</Text>\r\n                    </TouchableOpacity>\r\n                </View>\r\n                <FlatList\r\n                    data={dataSource}\r\n                    keyExtractor= {item => item.chapter_id.toString()}\r\n                    renderItem={({ item }) => (\r\n                    <TouchableOpacity onPress={() => {setModalVisible(!modalVisible), setStory(item);}} style={style.chapter}>         \r\n                        <Text numberOfLines={1}>{item.chapter_name}</Text>\r\n                    </TouchableOpacity>\r\n                    )}\r\n                    showsHorizontalScrollIndicator={false}\r\n                    ListEmptyComponent={ListEmpty}\r\n                />\r\n                <Modal\r\n                    animationType=\"slide\"\r\n                    transparent={true}\r\n                    visible={modalVisible}\r\n                    onRequestClose={() => {setModalVisible(!modalVisible);}}\r\n                >\r\n                    <View style={style.centeredView}>\r\n                    <View style={style.modalView}>\r\n                        <TouchableOpacity style={style.modalbutton} onPress={() => {props.navigation.navigate('EditPart', {item: story}); setModalVisible(false)}}>\r\n                            <Text>Edit Chapter</Text>\r\n                        </TouchableOpacity>\r\n                        <TouchableOpacity style={style.modalbutton} onPress={()=> {deleteChapter();}}>\r\n                            <Text>Delete Chapter</Text>\r\n                        </TouchableOpacity>\r\n                        <TouchableOpacity\r\n                            style={{marginTop: 10, alignItems: 'center'}}\r\n                            onPress={() => {\r\n                                setModalVisible(!modalVisible);\r\n                            }}\r\n                        >\r\n                        <Ionicons name=\"ios-close-circle-outline\" size={50} color=\"#aa4fff\" />\r\n                        </TouchableOpacity>\r\n                    </View>\r\n                    </View>\r\n                </Modal>  \r\n                </>\r\n            )}\r\n            ListEmptyComponent={ListEmpty}\r\n        />\r\n      </View>\r\n    )}\r\n  </View>\r\n\r\n  );\r\n  \r\n}\r\nexport {ListChapterScreen}\r\n\r\nvar style = StyleSheet.create({\r\n    MainContainer: {\r\n        justifyContent: 'center',\r\n        alignItems: 'center',\r\n        flex: 1,\r\n        margin: 10,\r\n    },\r\n    imageModal: {\r\n        width: 150,\r\n        height: 200,\r\n        marginTop: 20,\r\n    },\r\n    createBotton: {\r\n        borderRadius: 40,\r\n        backgroundColor: '#aa4fff',\r\n        padding: 10,\r\n        marginTop: 10\r\n    },\r\n    title: {\r\n        fontSize: 20, \r\n        fontWeight: 'bold', \r\n        marginTop: 10, \r\n        marginBottom: 10\r\n    },\r\n    chapter: {\r\n        padding: 10,\r\n        borderBottomWidth: 0.5,\r\n        borderBottomColor: 'grey'\r\n    },\r\n    centeredView: {\r\n        flex: 1,\r\n        justifyContent: \"center\",\r\n        alignItems: \"center\",\r\n        marginTop: 22\r\n      },\r\n      modalView: {\r\n        margin: 20,\r\n        width: Dimensions.get('window').width *0.7,\r\n        backgroundColor: \"white\",\r\n        borderRadius: 20,\r\n        padding: 10,\r\n    \r\n        shadowColor: \"#000\",\r\n        shadowOffset: {\r\n          width: 0,\r\n          height: 2\r\n        },\r\n        shadowOpacity: 0.25,\r\n        shadowRadius: 3.84,\r\n        elevation: 5\r\n      },\r\n      openButton: {\r\n        backgroundColor: \"#F194FF\",\r\n        borderRadius: 20,\r\n        padding: 10,\r\n        elevation: 2\r\n      },\r\n      modalbutton: {\r\n        padding: 10,\r\n        borderBottomWidth: 1,\r\n      }\r\n})\r\n\r\n"]},"metadata":{},"sourceType":"module"}