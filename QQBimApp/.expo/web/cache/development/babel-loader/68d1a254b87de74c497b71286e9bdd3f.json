{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"D:\\\\QQBimApp\\\\QQBimApp\\\\src\\\\users\\\\Components\\\\UserPageScreen\\\\HeaderUserPages.js\";\nimport React, { useState } from 'react';\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport AsyncStorage from \"react-native-web/dist/exports/AsyncStorage\";\nimport { SplashScreen } from \"../../ScreemFolder/OtherScreen\";\nimport { Feather, AntDesign, MaterialIcons } from '@expo/vector-icons';\nimport { useFocusEffect } from '@react-navigation/native';\n\nfunction HeaderUserPages(props) {\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      isLoading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n\n  var _React$useState3 = React.useState([]),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      dataSource = _React$useState4[0],\n      setDataSource = _React$useState4[1];\n\n  var _React$useState5 = React.useState(false),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      followed = _React$useState6[0],\n      setFollowed = _React$useState6[1];\n\n  var _React$useState7 = React.useState([]),\n      _React$useState8 = _slicedToArray(_React$useState7, 2),\n      userData = _React$useState8[0],\n      setUserData = _React$useState8[1];\n\n  useFocusEffect(React.useCallback(function () {\n    getInfotmation();\n    getData();\n    return function () {\n      console.log('un');\n    };\n  }, []));\n\n  var getData = function getData() {\n    return _regeneratorRuntime.async(function getData$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            try {\n              AsyncStorage.getItem('user').then(function (value) {\n                var jsonValue = JSON.parse(value);\n                setUserData(jsonValue);\n                get_follow(jsonValue.user_id);\n              });\n            } catch (e) {\n              console.log(e);\n            }\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var get_follow = function get_follow(user_id) {\n    fetch('http://192.168.0.100:19000/get_follow/' + user_id + '/' + props.route.params.item.user_id).then(function (response) {\n      return response.json();\n    }).then(function (res) {\n      if (res.length == 0) {\n        setFollowed(false);\n      } else {\n        setFollowed(true);\n      }\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  var getInfotmation = function getInfotmation() {\n    fetch('http://192.168.0.100:19000/author/' + props.route.params.item.user_id).then(function (response) {\n      return response.json();\n    }).then(function (res) {\n      setDataSource(res);\n    }).catch(function (error) {\n      console.log(error);\n    }).finally(function () {\n      setLoading(false);\n    });\n  };\n\n  var follow = function follow() {\n    fetch('http://192.168.0.100:19000/follow/' + userData.user_id + '/' + props.route.params.item.user_id).then(function (response) {\n      return response.json();\n    }).then(function (res) {\n      setFollowed(true);\n      console.log('un');\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  var unFollow = function unFollow() {\n    fetch('http://192.168.0.100:19000/unfollow/' + userData.user_id + '/' + props.route.params.item.user_id).then(function (response) {\n      return response.json();\n    }).then(function (res) {\n      setFollowed(false);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  };\n\n  return React.createElement(View, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 5\n    }\n  }, isLoading ? React.createElement(SplashScreen, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 19\n    }\n  }) : React.createElement(FlatList, {\n    data: dataSource,\n    horizontal: true,\n    showsHorizontalScrollIndicator: false,\n    keyExtractor: function keyExtractor(item) {\n      return item.user_id.toString();\n    },\n    renderItem: function renderItem(_ref) {\n      var item = _ref.item;\n      return React.createElement(View, {\n        style: style.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 13\n        }\n      }, React.createElement(Image, {\n        style: style.image,\n        source: {\n          uri: item.user_avatar\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 17\n        }\n      }), React.createElement(Text, {\n        style: {\n          marginTop: 5,\n          color: 'black',\n          fontSize: 18,\n          fontWeight: 'bold'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 17\n        }\n      }, \"@\", item.username), React.createElement(View, {\n        style: {\n          flex: 1\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 17\n        }\n      }, React.createElement(View, {\n        style: {\n          flex: 1,\n          flexDirection: 'row'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 19\n        }\n      }, React.createElement(Text, {\n        style: {\n          color: 'black'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }\n      }, item.num_following, \" following\"), React.createElement(Text, {\n        style: {\n          color: 'black',\n          marginLeft: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 21\n        }\n      }, item.num_follower, \" follower\")), React.createElement(View, {\n        style: {\n          flexDirection: 'row'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 19\n        }\n      }, followed ? React.createElement(TouchableOpacity, {\n        style: style.following,\n        onPress: function onPress() {\n          return unFollow();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 23\n        }\n      }, React.createElement(Text, {\n        style: {\n          color: 'white'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 25\n        }\n      }, React.createElement(Feather, {\n        name: \"user-minus\",\n        size: 20,\n        color: \"white\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 27\n        }\n      }), \" Unfollowing\")) : React.createElement(TouchableOpacity, {\n        style: style.following,\n        onPress: function onPress() {\n          return follow();\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 23\n        }\n      }, React.createElement(Text, {\n        style: {\n          color: 'white'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 25\n        }\n      }, React.createElement(AntDesign, {\n        name: \"adduser\",\n        size: 20,\n        color: \"white\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 27\n        }\n      }), \" Follow\")), React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return props.navigation.navigate('chatting', {\n            item: {\n              'a': props.route.params.item.user_id\n            }\n          });\n        },\n        style: {\n          marginLeft: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }\n      }, React.createElement(MaterialIcons, {\n        name: \"message\",\n        size: 35,\n        color: \"#aa4fff\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 23\n        }\n      })))));\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }\n  }));\n}\n\nexport { HeaderUserPages };\nvar style = StyleSheet.create({\n  container: {\n    padding: 5,\n    width: Dimensions.get('window').width,\n    height: 230,\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  image: {\n    marginTop: 20,\n    width: 100,\n    height: 100,\n    borderRadius: 50\n  },\n  following: {\n    alignItems: 'center',\n    borderRadius: 10,\n    justifyContent: 'center',\n    backgroundColor: '#aa4fff',\n    padding: 8,\n    flexDirection: 'row'\n  }\n});","map":{"version":3,"sources":["D:/QQBimApp/QQBimApp/src/users/Components/UserPageScreen/HeaderUserPages.js"],"names":["React","useState","SplashScreen","Feather","AntDesign","MaterialIcons","useFocusEffect","HeaderUserPages","props","isLoading","setLoading","dataSource","setDataSource","followed","setFollowed","userData","setUserData","useCallback","getInfotmation","getData","console","log","AsyncStorage","getItem","then","value","jsonValue","JSON","parse","get_follow","user_id","e","fetch","route","params","item","response","json","res","length","catch","error","finally","follow","unFollow","toString","style","container","image","uri","user_avatar","marginTop","color","fontSize","fontWeight","username","flex","flexDirection","num_following","marginLeft","num_follower","following","navigation","navigate","StyleSheet","create","padding","width","Dimensions","get","height","justifyContent","alignItems","borderRadius","backgroundColor"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { FlatList, StyleSheet, Image, View, Dimensions, Text, TouchableOpacity, AsyncStorage} from 'react-native';\r\nimport {SplashScreen} from '../../ScreemFolder/OtherScreen';\r\nimport { Feather, AntDesign,MaterialIcons } from '@expo/vector-icons';\r\nimport { useFocusEffect } from '@react-navigation/native';\r\n\r\nfunction  HeaderUserPages(props) {\r\n  const [isLoading, setLoading] = React.useState(false);\r\n  const [dataSource, setDataSource ]= React.useState([]);\r\n  const [followed, setFollowed] = React.useState(false);\r\n  const [userData, setUserData] = React.useState([]);\r\n  useFocusEffect(\r\n    React.useCallback(() => {\r\n      getInfotmation();\r\n      getData();\r\n      // Do something when the screen is focused\r\n      return () => {\r\n        console.log('un')\r\n      };\r\n    }, [])\r\n  );\r\n\r\n  const getData = async () => {\r\n    try {\r\n      AsyncStorage.getItem('user').then((value) => {\r\n        const jsonValue = JSON.parse(value);\r\n        setUserData(jsonValue);\r\n        get_follow(jsonValue.user_id)\r\n      })\r\n    } catch(e) {\r\n      console.log(e)\r\n    }\r\n  }\r\n\r\n  const get_follow=(user_id)=> {\r\n    fetch('http://192.168.0.100:19000/get_follow/'  + user_id + '/' + props.route.params.item.user_id )\r\n    .then ((response) => response.json())\r\n    .then ( (res) => { \r\n      if (res.length == 0) {\r\n        setFollowed(false)\r\n      } else {\r\n        setFollowed(true);\r\n      }\r\n    })\r\n    .catch ((error) => {\r\n      console.log(error);\r\n    })\r\n  }\r\n\r\n  const getInfotmation=()=>{\r\n    fetch('http://192.168.0.100:19000/author/' + props.route.params.item.user_id)\r\n    .then ((response) => response.json())\r\n    .then ( (res) => { \r\n      setDataSource(res);\r\n    })\r\n    .catch ((error) => {\r\n      console.log(error);\r\n    })\r\n    .finally(() => {\r\n      setLoading(false) \r\n    });\r\n  }\r\n\r\n  const follow=()=>{\r\n    fetch('http://192.168.0.100:19000/follow/' +  userData.user_id + '/' + props.route.params.item.user_id)\r\n    .then ((response) => response.json())\r\n    .then ( (res) => { \r\n      setFollowed(true);\r\n      console.log('un')\r\n    })\r\n    .catch ((error) => {\r\n      console.log(error);\r\n    })\r\n  }\r\n\r\n  const unFollow=()=> {\r\n    fetch('http://192.168.0.100:19000/unfollow/' + userData.user_id + '/' +  props.route.params.item.user_id)\r\n    .then ((response) => response.json())\r\n    .then ( (res) => { \r\n      setFollowed(false);\r\n    })\r\n    .catch ((error) => {\r\n      console.log(error);\r\n    })\r\n  }\r\n\r\n  return (\r\n    <View>\r\n      {isLoading? <SplashScreen/>: ( \r\n        <FlatList\r\n          data={dataSource}\r\n          horizontal\r\n          showsHorizontalScrollIndicator={false}\r\n          keyExtractor={item => item.user_id.toString()}\r\n          renderItem={({item}) => (\r\n            <View style={style.container}>\r\n                <Image style={style.image}\r\n                    source={{uri: item.user_avatar}} \r\n                />\r\n                <Text style={{marginTop: 5, color: 'black', fontSize: 18, fontWeight: 'bold'}}>@{item.username}</Text>\r\n                <View style={{flex:1}}> \r\n                  <View style={{flex:1, flexDirection: 'row'}}>\r\n                    <Text style={{color: 'black'}}>{item.num_following} following</Text>\r\n                    <Text style={{color: 'black', marginLeft: 10}}>{item.num_follower} follower</Text>\r\n                  </View>\r\n                  <View style={{flexDirection: 'row'}}>\r\n                    {followed? \r\n                      <TouchableOpacity style={style.following} onPress={() => unFollow()}>\r\n                        <Text style={{color: 'white'}}> \r\n                          <Feather name=\"user-minus\" size={20} color=\"white\" /> Unfollowing\r\n                        </Text>\r\n                        </TouchableOpacity>: \r\n                      <TouchableOpacity style={style.following} onPress={() => follow()}>\r\n                        <Text style={{color: 'white'}}> \r\n                          <AntDesign name=\"adduser\" size={20} color=\"white\" /> Follow\r\n                        </Text>\r\n                      </TouchableOpacity>\r\n                    }\r\n                    <TouchableOpacity onPress={()=> props.navigation.navigate('chatting', {item: {'a': props.route.params.item.user_id}})} style={{marginLeft: 10}}>\r\n                      <MaterialIcons name=\"message\" size={35} color=\"#aa4fff\" />\r\n                    </TouchableOpacity>\r\n                  </View>\r\n                </View>  \r\n            </View>\r\n          )}\r\n        />\r\n      )}\r\n    </View>\r\n  );\r\n} export {HeaderUserPages}\r\n\r\nconst style = StyleSheet.create({\r\n    container: {\r\n        padding: 5,\r\n        width: Dimensions.get('window').width, \r\n        height: 230,\r\n        justifyContent: 'center',\r\n        alignItems: 'center'\r\n    },\r\n    image: {\r\n        marginTop: 20,\r\n        width: 100, \r\n        height: 100, \r\n        borderRadius: 50\r\n    },\r\n    following: {\r\n      alignItems: 'center',\r\n      borderRadius: 10,\r\n      justifyContent: 'center',\r\n      backgroundColor: '#aa4fff',\r\n      padding: 8,\r\n      flexDirection: 'row'\r\n    }\r\n});\r\n"]},"metadata":{},"sourceType":"module"}